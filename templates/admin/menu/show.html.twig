<div class="menu-show-container">
    <div class="commande-actions">
        <button class="ajax-btn btn-back" data-url="{{ path('admin_menu_list') }}">
            <img src="{{ asset('Visuels/Icônes/Back_Beige.png') }}">Retour à la liste
        </button>
    </div>

    <h1 class="menu-title">{{ menu.nom }}</h1>

    <div class="menu-info">
        <p class="menu-theme"><strong>Thème :</strong> {{ menu.theme ? menu.theme.libelle : '-' }}</p>
        <p class="menu-regime"><strong>Régime :</strong> {{ menu.regime ? menu.regime.libelle : '-' }}</p>
        <p class="menu-nb-pers"><strong>Nombre de personnes minimum :</strong> {{ menu.nbPersMin }}</p>
        <p class="menu-stock"><strong>Stock :</strong> {{ menu.stock }}</p>
        <p class="menu-prix"><strong>Prix par personne :</strong> {{ menu.prixParPersonne }} €</p>
        <p class="menu-description"><strong>Description :</strong> {{ menu.description }}</p>
    </div>

    <h2 class="menu-section-title">Conditions</h2>
    {% if menu.conditions|length > 0 %}
        <ul class="menu-conditions">
            {% for condition in menu.conditions %}
                <li class="menu-condition-item">{{ condition.libelle }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="menu-no-conditions">Aucune condition</p>
    {% endif %} 

    <h2 class="menu-section-title">Images</h2>
    {% if menu.images|length > 0 %}
        <div class="menu-images">
            {% for image in menu.images %}
                <div class="menu-image">
                    <img src="{{ asset(image.url) }}" alt="{{ image.altText }}" class="menu-image-img">
                    {% if image.estPrincipale %}
                        <p class="menu-image-principale">Image principale</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="menu-no-images">Aucune image</p>
    {% endif %}

    <h2 class="menu-section-title">Plats associés</h2>
    {% if menu.menuPlats|length > 0 %}
        <ul class="menu-plats">
            {% for mp in menu.menuPlats %}
               <li class="menu-plat-item">
                {% if mp.plat.category %}
                    <span class="menu-plat-category">{{ mp.plat.category.libelle }}</span> :
                {% else %}
                    <span class="menu-plat-category">—</span> :
                {% endif %}
                {{ mp.plat.titrePlat }}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="menu-no-plats">Aucun plat associé</p>
    {% endif %}

    <div class="menu-actions">
        <a href="{{ path('admin_menu_edit', {'id': menu.id}) }}" 
            class="btn menu-btn-edit ajax-btn" 
            data-url="{{ path('admin_menu_edit', {'id': menu.id}) }}">
            <img src="{{ asset('Visuels/Icônes/Edit_Beige.png') }}" alt="Modifier">Modifier
        </a>

        <form method="post"
          action="{{ path('admin_menu_delete', {'id': menu.id}) }}"
          onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce menu ?');"
          style="display:inline-block;">
        
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ menu.id) }}">

        <button class="btn menu-btn-delete" type="submit">
            <img src="{{ asset('Visuels/Icônes/Delete_Beige.png') }}" alt="Supprimer">
            Supprimer
        </button>
    </form>
    </div>

</div>